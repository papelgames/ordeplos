{% extends "base_template.html" %}
{% from "_render_elements.html" import render_input %}

{% block title %}
    Ordeplos | Permisos por usuario
{% endblock %}

{% block content %}
<div class="row">
	<div class="offset-md-3 col-md-6">
		<h1 class="display-4">Alta de roles por usuarios</h1>
	</div>
	<h4>Usuario: {{ user.persona.descripcion_nombre}}</h4>
	<div class="col-md-6">
		<div class="offset-md-3 col-md-6">
			<form action="" method="post" class="mx-auto mt-4" enctype="multipart/form-data" novalidate>	
				{{ form.hidden_tag() }}
				{{ render_input(form.rol,'', id= "rol" , class="form-control" ) }}
				<button type="submit" class="btn btn-primary" >Guardar</button>
			</form>
		</div>
	</div>
	<div class="col-md-6">
		{% if user %}
			<div class="offset-md-3  col-md-6">
				<table class="table table-striped table-hover mb-4">
					<thead>
						<tr>
							<th>PERMISO</th>
							<th>ACCION</th>
						</tr>
					</thead>
					<tbody>
						{% for permiso in user.permisos %}
							<tr>
								<td>{{ permiso.descripcion }}</td>
								<td>
									<a href="{{ url_for('admin.eliminar_permiso_usuario', user_id=user.id, id_permiso=permiso.id, pantalla='roles') }}">
										<button class="btn btn-sm btn-danger">Eliminar</button>
									</a>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		{% endif %}
	</div>
</div>
{% endblock %}